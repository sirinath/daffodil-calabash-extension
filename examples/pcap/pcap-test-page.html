<html>
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8"/>
    <title>PCAP Pipeline Test Page</title>
    <script lang="text/javascript">
    function reloadStatus(millis) {
    	setTimeout(function() {document.getElementById("statusLink").click()}, millis);
    }
    </script>
  </head>
  <body>
    <h1>PCAP Pipeline Test Page</h1>
    
    <h2>Commands</h2>
    <ul>
    <li>
        <form method="POST" action="http://localhost:8088/pipelines/pcap/reset"
            target="output" onsubmit='reloadStatus(1000)'>
            <input type="submit" value="Reset" />    
        </form>
    </li>
    <li>
        <!-- This doesn't work as documented.  So I'm using javascript to 
            hack the URL. -->
        <form name="options" method="POST" action="http://localhost:8088/pipelines/pcap/options"
        target="output" onsubmit='reloadStatus(1000)'>
            <input type="text" name="file" size="80"> <br>
            <button onclick='document.forms["options"].action = "http://localhost:8088/pipelines/pcap/options?file=" + document.forms["options"].file.value; document.forms["options"].submit()'>Set File</button>
        </form>
    </li>
    <li>
        <form method="POST" action="http://localhost:8088/pipelines/pcap/run"
            target="output" onsubmit='reloadStatus(3000)'>
            <input type="submit" value="Run Pipeline"/>
        </form>
    </li>
    </ul>
    
    <h2>Output</h2> 
    <iframe name="output" height="200" width="100%"></iframe>
    
    <h2> Pipeline status</h2>
    <a id="statusLink" href="http://localhost:8088/pipelines/pcap" target="status">Reload</a> <p>
    <iframe name="status" src="http://localhost:8088/pipelines/pcap" height="300"
      width="100%"></iframe>
  </body>
</html>
